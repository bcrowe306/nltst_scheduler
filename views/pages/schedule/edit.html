{{template "breadcrumbs" .}}
<div class="card">
  <div class="card-header">
    <h4>Edit Event</h4>

  </div>
  <div class="card-body">
    <div class="row">

      <!-- Event Details -->
      <div class="col-lg-6">
        <form method="POST" action="/schedule/{{ .Event.ID }}">

          <!-- Name -->
          <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input name="name" type="text" class="form-control" id="name" aria-describedby="nameHelp"
              value="{{ .Event.Name }}">
          </div>

          <!-- Description -->
          <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea name="description" class="form-control" id="description"
              rows="3">{{ .Event.Description }}</textarea>
          </div>

          <!-- Date -->
          <div class="mb-3">
            <label for="date" class="form-label">Date</label>
            <input name="date" type="date" class="form-control" id="date" aria-describedby="dateHelp"
              value="{{ .Event.Date.Format "2006-01-02" }}">
          </div>

          <!-- Start Time -->
          <div class="mb-3">
            <label for="startTime" class="form-label">Start Time</label>
            <input name="startTime" type="time" class="form-control" id="startTime" aria-describedby="startTimeHelp"
              value="{{ .Event.StartTime }}">
          </div>

          <!-- End Time -->
          <div class="mb-3">
            <label for="endTime" class="form-label">End Time</label>
            <input name="endTime" type="time" class="form-control" id="endTime" aria-describedby="endTimeHelp"
              value="{{ .Event.EndTime }}">
          </div>


          <!-- Submit -->
          <button type="submit" class="btn btn-primary">Submit</button>

          <!-- Cancel -->
          <a href="/schedule" class="btn btn-link">Cancel</a>
        </form>
      </div>

      <!-- Positions -->
      <div class="col-lg-6">
        <!-- Horizontal form using bootstrap -->
        <form action="/schedule/{{ .Event.ID }}/positions" method="POST" class="row g-3 mt-3">
          <!-- Position Name input -->
          <div class="mb-3 col-lg-6">
            <input name="position_name" type="text" class="form-control" id="positionName"
              aria-describedby="positionNameHelp">
          </div>
          <!-- Submit button -->
          <div class="col-lg-6">
            <button type="submit" class="btn btn-secondary">Add Position</button>
          </div>
        </form>
        <div class="mt-4">
          <h5>Positions</h5>
          <ul class="list-group">
            {{range $pos := .Event.PositionAssignments}}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              {{$pos.PositionName}}

              <form action="/schedule/{{$.Event.ID}}/positions/assign" method="POST" class="d-inline">
                <!-- Hidden inputs for positionID -->
                <input type="hidden" name="positionID" value="{{$pos.ID}}">
                <div class="input-group">
                  <select class="form-select form-select-sm" name="member_id" aria-label=".form-select-sm example">
                    <option value="">Unassigned</option>
                    {{range $.TeamMembers}}
                    <option value="{{.ID}}" {{if eq .ID $pos.MemberID}}selected{{end}}>{{.FirstName}} {{.LastName}}</option>
                    {{end}}
                  </select>
                  <button class="btn btn-sm btn-outline-secondary btn-primary btn-light" type="submit">
                    Assign
                  </button>
                </div>
              </form>

              <a class="icon-link text-danger" href="/schedule/{{$.Event.ID}}/positions/delete/{{$pos.PositionName}}">
                <svg class="bi" aria-hidden="true">
                  <use xlink:href="/public/icons/trash.svg"> </use>
                </svg>
              </a>
            </li>
            {{else}}
            <li class="list-group-item">No positions added yet.</li>
            {{end}}
          </ul>
        </div>
      </div> <!-- End Row -->

    </div>


  </div>